@prefix : <http://www.w3id.org/agentic-ai/onto#> .
@prefix pp: <http://purl.org/net/p-plan#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix beam: <http://w3id.org/beam/core#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@base <http://www.w3id.org/agentic-ai/onto#> .
@prefix agento-ext: <http://www.w3id.org/agentic-ai/ext#> .

# Execution time: 58.64 seconds
# Model used: gpt-5-mini

# Issues / Assumptions:
# - The runtime "process" (Process.sequential) used in the code is not represented in the ontology (no property/class to capture execution/process semantics). Modeled as a crew system config entry (literal).
# - Agent runtime flags from code (verbose, allow_delegation) have no dedicated properties in the ontology. Represented inside Config individuals as key/value pairs.
# - Implementation details of tools (tool methods, source code) cannot be modeled (no properties/classes). Tool names and descriptions are captured via dcterms:title / dcterms:description where possible.
# - The exact language model used by agents is not specified in source; created a DefaultLanguageModel individual and linked agents to it with a note. If exact LLM identity is required, the ontology must be extended.
# - No property for "tool parameters" or "tool methods" exists; configuration and descriptive text for tools are stored in Config individuals and dcterms literals.
# - The crew "agents_config" and "tasks_config" YAML files are represented as Config individuals with keys and values. The mapping of YAML structure to multiple configKey/configValue pairs is used because the ontology only offers configKey/configValue dataproperties.
# - Code-level constructs (decorators, SDK classes) are intentionally omitted; the semantic entities (agents, tasks, tools, prompts, files, workflow) are modeled to allow reconstruction of the high-level solution.
# - The "job_opportunities_parser" agent configuration exists in agents.yaml but is not instantiated in the code; it is included as a Config individual but no LLMAgent individual is created for it.

#################################################################
# Team / Crew
#################################################################

:MatchToProposalCrew rdf:type :Team ;
    dcterms:title "MatchToProposal Crew" ;
    dcterms:description "A Crew that coordinates reading CVs and matching them to job opportunities. Constructed with two agents (cv_reader, matcher) and two tasks run sequentially." ;
    :hasAgentMember :cv_reader_agent , :matcher_agent ;
    :hasWorkflowPattern :MatchToProposalWorkflowPattern ;
    :hasSystemConfig :Config_crew_system .

#################################################################
# Agents (LLMAgents)
#################################################################

:cv_reader_agent rdf:type :LLMAgent ;
    :agentID "cv_reader" ;
    :agentRole "CV Reader" ;
    dcterms:description "Agent responsible for extracting structured information from CV files." ;
    :agentPrompt :Prompt_cv_reader_agent ;
    :hasAgentConfig :Config_agents_cv_reader ;
    :agentToolUsage :FileReadTool ;
    :useLanguageModel :DefaultLanguageModel .

:matcher_agent rdf:type :LLMAgent ;
    :agentID "matcher" ;
    :agentRole "Matcher" ;
    dcterms:description "Agent responsible for matching the structured CV output to job opportunities and producing a ranked list." ;
    :agentPrompt :Prompt_matcher_agent ;
    :hasAgentConfig :Config_agents_matcher ;
    :agentToolUsage :FileReadTool , :CSVSearchTool ;
    :useLanguageModel :DefaultLanguageModel .

#################################################################
# Language Model placeholder (because code does not specify model)
#################################################################

:DefaultLanguageModel rdf:type :LanguageModel ;
    dcterms:title "default/unspecified language model" ;
    dcterms:description "No explicit language model is specified in source code; the runtime provides an LLM. This individual captures that unspecified runtime model." .

#################################################################
# Tools
#################################################################

:FileReadTool rdf:type :Tool ;
    dcterms:title "FileReadTool" ;
    dcterms:description "Tool used to read file contents (used by cv_reader and matcher)." ;
    :hasToolConfig :Config_tool_fileread .

:CSVSearchTool rdf:type :Tool ;
    dcterms:title "CSVSearchTool" ;
    dcterms:description "Tool used to search and parse CSV job listings (used by matcher)." ;
    :hasToolConfig :Config_tool_csvsearch .

:MyCustomTool rdf:type :Tool ;
    dcterms:title "MyCustomTool" ;
    dcterms:description "Custom tool implemented at src/match_to_proposal/tools/job_db_connect.py. Placeholder for an external DB connector. Implementation-specific behavior not modeled." ;
    :hasToolConfig :Config_tool_mycustom .

#################################################################
# Configurations (Config individuals)
# Each Config captures key/value pairs from YAML or runtime flags.
#################################################################

:Config_agents_cv_reader rdf:type :Config ;
    :configKey "role" ; :configValue "CV Reader" ;
    :configKey "goal" ; :configValue "Extract relevant information from the CV, such as skills, experience, and education." ;
    :configKey "backstory" ; :configValue "With years of experience in HR, you excel at quickly identifying key qualifications in resumes." ;
    :configKey "tools" ; :configValue "FileReadTool" ;
    :configKey "verbose" ; :configValue "True" ;
    :configKey "allow_delegation" ; :configValue "False" .

:Config_agents_matcher rdf:type :Config ;
    :configKey "role" ; :configValue "Matcher" ;
    :configKey "goal" ; :configValue "Match the CV to the job opportunities based on skills and experience." ;
    :configKey "backstory" ; :configValue "A seasoned recruiter, you specialize in finding the perfect fit between candidates and job roles." ;
    :configKey "tools" ; :configValue "FileReadTool, CSVSearchTool" ;
    :configKey "verbose" ; :configValue "True" ;
    :configKey "allow_delegation" ; :configValue "False" .

:Config_agents_job_opportunities_parser rdf:type :Config ;
    :configKey "role" ; :configValue "Job Opportunities Parser" ;
    :configKey "goal" ; :configValue "Extract job descriptions from the CSV file, including job title, required skills, and responsibilities." ;
    :configKey "backstory" ; :configValue "A data analyst who has transitioned into HR, you have a knack for organizing and interpreting job data." .

:Config_tasks_read_cv rdf:type :Config ;
    :configKey "description" ;
    :configValue """Extract relevant information from the given CV. Focus on skills, experience,
    education, and key achievements.
    Ensure to capture the candidate's professional summary, technical skills,
    work history, and educational background.

    CV file: {path_to_cv}""" ;
    :configKey "expected_output" ;
    :configValue """A structured summary of the CV, including:
    - Professional Summary
    - Technical Skills
    - Work History
    - Education
    - Key Achievements""" .

:Config_tasks_match_cv rdf:type :Config ;
    :configKey "description" ;
    :configValue """Match the CV to the job opportunities based on skills, experience, and key
    achievements.
    Evaluate how well the candidate's profile fits each job description,
    focusing on the alignment of skills, work history, and key achievements
    with the job requirements.

    Jobs CSV file: {path_to_jobs_csv}

    CV file: {path_to_cv}""" ;
    :configKey "expected_output" ;
    :configValue """A ranked list of job opportunities that best match the CV, including:
    - Job Title
    - Match Score (based on skills and experience)
    - Key Matching Points""" .

:Config_tool_fileread rdf:type :Config ;
    :configKey "description" ; :configValue "Reads and returns file contents given a path. Used to access CV and any file-based resources." .

:Config_tool_csvsearch rdf:type :Config ;
    :configKey "description" ; :configValue "Searches CSV files and extracts rows matching criteria. Used to parse the jobs CSV." .

:Config_tool_mycustom rdf:type :Config ;
    :configKey "name" ; :configValue "Name of my tool" ;
    :configKey "description" ; :configValue "Clear description for what this tool is useful for, your agent will need this information to use it." .

:Config_crew_system rdf:type :Config ;
    :configKey "process" ; :configValue "sequential" ;
    :configKey "verbose" ; :configValue "2" ;
    :configKey "agents_config_path" ; :configValue "config/agents.yaml" ;
    :configKey "tasks_config_path" ; :configValue "config/tasks.yaml" .

#################################################################
# Prompts (for agents and tasks)
#################################################################

:Prompt_cv_reader_agent rdf:type :Prompt ;
    :promptInstruction "Role: CV Reader\nGoal: Extract relevant information from the CV, such as skills, experience, and education.\nBackstory: With years of experience in HR, you excel at quickly identifying key qualifications in resumes." ;
    :promptContext "Agent-level prompt to orient behavior. Use FileReadTool to access CV file. Produce a structured CV summary." ;
    :promptOutputIndicator "A structured summary of the CV (Professional Summary, Technical Skills, Work History, Education, Key Achievements)." .

:Prompt_matcher_agent rdf:type :Prompt ;
    :promptInstruction "Role: Matcher\nGoal: Match the CV to the job opportunities based on skills and experience.\nBackstory: A seasoned recruiter, you specialize in finding the perfect fit between candidates and job roles." ;
    :promptContext "Agent-level prompt to orient behavior. Use CSVSearchTool and FileReadTool to access jobs CSV and CV summary." ;
    :promptOutputIndicator "A ranked list of job opportunities with match scores and key matching points." .

:Prompt_read_cv_task rdf:type :Prompt ;
    :promptInstruction """Extract relevant information from the given CV. Focus on skills, experience,
education, and key achievements.
Ensure to capture the candidate's professional summary, technical skills,
work history, and educational background.

CV file: {path_to_cv}""" ;
    :promptInputData "{path_to_cv}" ;
    :promptOutputIndicator """A structured summary of the CV, including:
- Professional Summary
- Technical Skills
- Work History
- Education
- Key Achievements""" .

:Prompt_match_cv_task rdf:type :Prompt ;
    :promptInstruction """Match the CV to the job opportunities based on skills, experience, and key
achievements.
Evaluate how well the candidate's profile fits each job description,
focusing on the alignment of skills, work history, and key achievements
with the job requirements.

Jobs CSV file: {path_to_jobs_csv}

CV file: {path_to_cv}""" ;
    :promptInputData "{path_to_jobs_csv}, {path_to_cv}" ;
    :promptOutputIndicator """A ranked list of job opportunities that best match the CV, including:
- Job Title
- Match Score (based on skills and experience)
- Key Matching Points""" .

# Link prompts to tasks and agents
:cv_reader_agent :agentPrompt :Prompt_cv_reader_agent .
:matcher_agent :agentPrompt :Prompt_matcher_agent .

:read_cv_task :taskPrompt :Prompt_read_cv_task .
:match_cv_task :taskPrompt :Prompt_match_cv_task .

#################################################################
# Tasks
#################################################################

:read_cv_task rdf:type :Task ;
    dcterms:title "read_cv_task" ;
    dcterms:description "Task: extract structured summary from input CV file." ;
    :performedByAgent :cv_reader_agent ;
    :hasPrompt :Prompt_read_cv_task ;
    :requiresResource :Resource_input_cv_md ;
    :producedResource :Resource_cv_structured_summary ;
    :contributesToObjective :Objective_generate_cv_summary .

:match_cv_task rdf:type :Task ;
    dcterms:title "match_cv_task" ;
    dcterms:description "Task: match structured CV summary against job opportunities CSV and produce ranked list." ;
    :performedByAgent :matcher_agent ;
    :hasPrompt :Prompt_match_cv_task ;
    :requiresResource :Resource_input_jobs_csv , :Resource_cv_structured_summary ;
    :producedResource :Resource_match_ranked_list ;
    :contributesToObjective :Objective_generate_match_list .

#################################################################
# Inputs and produced artifacts as Resources (beam:Instance)
#################################################################

:Resource_input_cv_md rdf:type beam:Instance ;
    dcterms:title "cv.md (input CV)" ;
    dcterms:description "CV markdown file provided as input" ;
    dcterms:reference "./src/match_to_proposal/data/cv.md" .

:Resource_input_jobs_csv rdf:type beam:Instance ;
    dcterms:title "jobs.csv (input jobs CSV)" ;
    dcterms:description "CSV file listing job opportunities" ;
    dcterms:reference "./src/match_to_proposal/data/jobs.csv" .

:Resource_cv_structured_summary rdf:type beam:Instance ;
    dcterms:title "CV Structured Summary" ;
    dcterms:description "Structured summary of the CV produced by read_cv_task; includes Professional Summary, Technical Skills, Work History, Education, Key Achievements." .

:Resource_match_ranked_list rdf:type beam:Instance ;
    dcterms:title "Ranked Job Matches" ;
    dcterms:description "A ranked list of job opportunities that best match the CV, produced by match_cv_task; includes Job Title, Match Score, Key Matching Points." .

#################################################################
# Objectives (Contexts)
#################################################################

:Objective_generate_cv_summary rdf:type :Objective ;
    dcterms:title "Generate CV Structured Summary" ;
    dcterms:description "Objective for producing a structured summary of the given CV." ;
    :contributesToGoal :Goal_match_to_proposals .

:Objective_generate_match_list rdf:type :Objective ;
    dcterms:title "Generate Ranked Match List" ;
    dcterms:description "Objective for producing a ranked list of job matches for the candidate." ;
    :contributesToGoal :Goal_match_to_proposals .

:Goal_match_to_proposals rdf:type :Goal ;
    dcterms:title "Match candidate CV to job proposals" ;
    dcterms:description "Top-level goal: identify and rank job opportunities for a given CV." .

#################################################################
# Workflow Pattern and Steps
#################################################################

:MatchToProposalWorkflowPattern rdf:type :WorkflowPattern ;
    dcterms:title "MatchToProposal Workflow Pattern" ;
    dcterms:description "Sequential workflow: 1) read CV -> 2) match CV to jobs" ;
    :hasWorkflowStep :Step_read_cv , :Step_match_cv ;
    :hasRelatedPattern :NextPattern_placeholder .

:Step_read_cv rdf:type :StartStep ;
    dcterms:title "read CV step" ;
    :stepOrder 1 ;
    :hasAssociatedTask :read_cv_task ;
    :nextStep :Step_match_cv .

:Step_match_cv rdf:type :EndStep ;
    dcterms:title "match CV step" ;
    :stepOrder 2 ;
    :hasAssociatedTask :match_cv_task .

:NextPattern_placeholder rdf:type :WorkflowPattern ;
    dcterms:title "No subsequent pattern" ;
    dcterms:description "Placeholder used to indicate there is no explicitly chained workflow pattern in source code." .

#################################################################
# Relationships among tasks, tools, and resources (reiterated)
#################################################################

# Tools used by agents (already set via :agentToolUsage above). Also indicate toolUsage relationships for completeness.
:FileReadTool :resourceUsage :Resource_input_cv_md .
:CSVSearchTool :resourceUsage :Resource_input_jobs_csv .

#################################################################
# Misc: Human agent (not used but left out intentionally)
#################################################################

# No human participants present in the provided code/run configuration.
# End of individuals.

################################################################################
# KickoffInputBundle (agento-ext) â€” Uniform runtime inputs for pipeline extraction
################################################################################

:KickoffInput_path_to_cv a agento-ext:KickoffInputBundle ;
    agento-ext:inputKey "path_to_cv" ;
    agento-ext:inputValue "./src/match_to_proposal/data/cv.md" ;
    agento-ext:isDefaultValue true .

:KickoffInput_path_to_jobs_csv a agento-ext:KickoffInputBundle ;
    agento-ext:inputKey "path_to_jobs_csv" ;
    agento-ext:inputValue "./src/match_to_proposal/data/jobs.csv" ;
    agento-ext:isDefaultValue true .
