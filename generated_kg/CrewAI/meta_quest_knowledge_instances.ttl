@prefix : <http://www.w3id.org/agentic-ai/onto#> .
@prefix pp: <http://purl.org/net/p-plan#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix beam: <http://w3id.org/beam/core#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@base <http://www.w3id.org/agentic-ai/onto#> .
@prefix agento-ext: <http://www.w3id.org/agentic-ai/ext#> .

# Execution time: 57.23 seconds
# Model used: gpt-5-mini

# Issues / Assumptions:
# - The ontology does not have explicit classes/properties for "knowledge source type" (e.g., PDFKnowledgeSource) or for representing file artifacts beyond generic KnowledgeBase/Instance; PDF file is modeled as a KnowledgeBase instance with dcterms:reference pointing to the filename.
# - The ontology lacks constructs for runtime operations and CLI functions (train, test, replay, kickoff). These are not modeled as executable code; instead, the primary workflow (sequential process of answering a question) is modeled as a WorkflowPattern with steps. Training/test/replay operations, runtime parameters (e.g., n_iterations, filename), and verbose flags are documented below in literal descriptions where possible but not represented as executable behavior.
# - The ontology does not have an explicit property to represent the process type (Process.sequential). This is recorded as a textual description on the WorkflowPattern.
# - Detailed implementation-specific metadata (module names, Python decorators, function names) are intentionally omitted per instructions; where necessary the semantic meaning is preserved as descriptions (e.g., which agent performs which task, knowledge sources used, config contents).
# - There is no property to represent mapping of config file structure to Config key/value pairs in a more structured way. Full YAML contents are preserved as dcterms:description literals on Config individuals. configKey and configValue are used only for the file path key.
# - Runtime-unspecified language model name (openai_model_name provided at runtime) is represented as a LanguageModel individual with a description indicating it is runtime-specified.
# - Example runtime input used in the repository ("How often should I take breaks?") is stored as promptInputData on the task prompt.

#################################################################
# Instances extracted from the meta_quest_knowledge project
#################################################################

### Team / Crew
:MetaQuestKnowledge_Crew rdf:type :Team ;
    dcterms:title "MetaQuestKnowledge Crew" ;
    dcterms:description "Crew coordinating agents and tasks to answer Meta Quest questions using available knowledge sources (PDF)." ;
    :hasAgentMember :meta_quest_expert ;
    :hasWorkflowPattern :meta_quest_sequential_workflow ;
    :hasSystemConfig :agents_config_file ;
    :hasConfig :tasks_config_file ;
    :hasTeamGoal :MetaQuest_Answering_Goal ;
    :hasObjective :MetaQuest_Answering_Objective .

### Agent (LLM Agent)
:meta_quest_expert rdf:type :LLMAgent ;
    dcterms:title "meta_quest_expert" ;
    :agentID "meta_quest_expert" ;
    :agentRole "Meta Quest Expert" ;
    dcterms:description "An LLM-based agent configured to answer questions about Meta Quest using provided knowledge sources and a task-driven prompt. Created from agents configuration 'config/agents.yaml'." ;
    :hasAgentGoal :MetaQuest_Answering_Goal ;
    :hasAgentConfig :agents_config_file ;
    :agentPrompt :meta_quest_expert_agent_prompt ;
    :hasKnowledge :meta_quest_manual_pdf_kb ;
    :agentResourceUsage :meta_quest_manual_pdf_kb ;
    :useLanguageModel :openai_runtime_model .

### Language Model (runtime-specified)
:openai_runtime_model rdf:type :LanguageModel ;
    dcterms:title "OpenAI model (runtime-specified)" ;
    dcterms:description "Language model used by the agent. The specific model name is supplied at runtime (openai_model_name parameter in test function); not fixed in source. Represented here as a runtime-specified language model." .

### Knowledge Base (PDF)
:meta_quest_manual_pdf_kb rdf:type :KnowledgeBase ;
    dcterms:title "Meta Quest Manual (PDF)" ;
    dcterms:reference "meta_quest_manual.pdf" ;
    dcterms:description "PDF knowledge source provided to the crew via PDFKnowledgeSource (file path preserved). Contains domain knowledge for answering user questions about Meta Quest." .

### Config files (content preserved)
:agents_config_file rdf:type :Config ;
    dcterms:title "agents.yaml (config/agents.yaml)" ;
    :configKey "path" ;
    :configValue "config/agents.yaml" ;
    dcterms:description """meta_quest_expert:
  role: >
    Meta Quest Expert
  goal: >
    Provide the best possible answers to questions about Meta Quest
  backstory: >
    You're a seasoned expert in the world of Meta Quest. You're known for your
    ability to provide the best possible answers to questions about this
    cutting-edge technology, ensuring that your audience is well-informed and
    satisfied with the latest advancements in the field.
""" .

:tasks_config_file rdf:type :Config ;
    dcterms:title "tasks.yaml (config/tasks.yaml)" ;
    :configKey "path" ;
    :configValue "config/tasks.yaml" ;
    dcterms:description """answer_question_task:
  description: >
    Answer the user question with the most relevant information from the context and available knowledge sources.
    Question: {question}

    Do not answer questions that are not related to the context or knowledge sources.
  expected_output: >
    Best answer to the user question
  agent: meta_quest_expert
""" .

### Goal and Objective
:MetaQuest_Answering_Goal rdf:type :Goal ;
    dcterms:title "Provide the best possible answers to questions about Meta Quest" ;
    dcterms:description "Goal expressed in agents configuration to provide best answers to questions about Meta Quest." .

:MetaQuest_Answering_Objective rdf:type :Objective ;
    dcterms:title "Answer user questions about Meta Quest" ;
    dcterms:description "Objective assigned to the crew: answer user questions by using available knowledge sources (PDF manual) and agent capabilities." .

### Task and Prompt
:answer_question_task rdf:type :Task ;
    dcterms:title "answer_question_task" ;
    dcterms:description "Answer the user question with the most relevant information from the context and available knowledge sources. Question: {question}\n\nDo not answer questions that are not related to the context or knowledge sources." ;
    :taskPrompt :answer_question_task_prompt ;
    :performedByAgent :meta_quest_expert ;
    :contributesToObjective :MetaQuest_Answering_Objective ;
    dcterms:comment "Task defined in tasks.yaml; agent assigned: meta_quest_expert" .

:answer_question_task_prompt rdf:type :Prompt ;
    dcterms:title "answer_question_task_prompt" ;
    :promptInstruction """Answer the user question with the most relevant information from the context and available knowledge sources.
Question: {question}

Do not answer questions that are not related to the context or knowledge sources.
""" ;
    :promptOutputIndicator "Best answer to the user question" ;
    :promptInputData "How often should I take breaks?" ;
    dcterms:description "Task-level prompt/template as declared in config/tasks.yaml. The placeholder {question} is intended to be interpolated at runtime with actual user input." .

### Agent-level Prompt (agent backstory / role as an agent prompt)
:meta_quest_expert_agent_prompt rdf:type :Prompt ;
    dcterms:title "meta_quest_expert_agent_prompt" ;
    :promptInstruction """Role: Meta Quest Expert
Goal: Provide the best possible answers to questions about Meta Quest
Backstory: You're a seasoned expert in the world of Meta Quest. You're known for your ability to provide the best possible answers to questions about this cutting-edge technology, ensuring that your audience is well-informed and satisfied with the latest advancements in the field.
""" ;
    :promptContext "Agent-level instruction/backstory used to guide the agent's independent reasoning and responses." .

### Workflow pattern and steps (sequential)
:meta_quest_sequential_workflow rdf:type :WorkflowPattern ;
    dcterms:title "MetaQuest Knowledge Sequential Workflow" ;
    dcterms:description "A sequential workflow: start -> answer question -> end. Process type: sequential (Process.sequential in source code)." ;
    :hasWorkflowStep :mq_start_step , :mq_answer_step , :mq_end_step .

:mq_start_step rdf:type :StartStep ;
    dcterms:title "Start Step" ;
    :stepOrder 1 ;
    dcterms:description "Start of the workflow; kickoff may supply inputs (example input preserved on task prompt)." .

:mq_answer_step rdf:type :WorkflowStep ;
    dcterms:title "Answer Question Step" ;
    :stepOrder 2 ;
    :hasAssociatedTask :answer_question_task ;
    dcterms:description "Core workflow step where the assigned agent uses the provided prompts and knowledge sources to answer the user's question." .

:mq_end_step rdf:type :EndStep ;
    dcterms:title "End Step" ;
    :stepOrder 3 ;
    dcterms:description "Completion of the workflow after answer is produced." .

#################################################################
# Additional metadata / mappings to preserve provenance & usage
#################################################################

# The crew.py file referenced the local PDF file path; we preserve the file reference in the KnowledgeBase instance.
# The main.py script contains example inputs and runtime functions (run, train, replay, test). We preserve the example input used in the repository as promptInputData on the task prompt.

# Note: CLI/runtime functions (train, replay, test) and related runtime parameters (n_iterations, filename, openai_model_name) are not modeled as executable constructs in the ontology.
# They are documented here for traceability:
:meta_quest_runtime_notes rdf:type :Context ;
    dcterms:description """Runtime operations observed in the repository:
- run(): kicks off crew with inputs {'question': 'How often should I take breaks?'}.
- train(): calls crew.train(n_iterations, filename, inputs) where n_iterations and filename are supplied at runtime.
- replay(): calls crew.replay(task_id) to replay execution from a specific task.
- test(): calls crew.test(n_iterations, openai_model_name, inputs) allowing specifying openai_model_name at runtime.

These runtime operations and parameters are preserved as documentation rather than modeled as executable ontology constructs.
""" .

#################################################################
# End of instance population for meta_quest_knowledge
#################################################################

################################################################################
# KickoffInputBundle (agento-ext) â€” Uniform runtime inputs for pipeline extraction
################################################################################

:KickoffInput_question a agento-ext:KickoffInputBundle ;
    agento-ext:inputKey "question" ;
    agento-ext:inputValue "How often should I take breaks?" ;
    agento-ext:isDefaultValue true .
